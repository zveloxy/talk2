<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talk2 Chat</title>
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#6366f1">
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js');
            });
        }
    </script>
</head>
<body>
    <div id="app">
        <!-- Nickname Modal -->
        <div id="nickname-overlay" class="overlay">
            <div class="modal">
                <div class="modal-icon"><i class="fas fa-satellite"></i></div>
                <h2 data-i18n="modalTitle">Talk2'ya Girin</h2>
                <p><span data-i18n="modalText">odayÄ± katÄ±lmak iÃ§in bir takma ad seÃ§in:</span> <strong id="room-display"></strong></p>
                <form id="nickname-form">
                    <input type="text" id="nickname-input" placeholder="Ã¶rn. KozmikGezgin" maxlength="15" required autocomplete="off" data-i18n-placeholder="placeholderNickname">
                    <button type="submit" data-i18n="btnConnect">BaÄŸlan</button>
                    <button type="button" id="random-nickname" data-i18n="btnRandom">Rastgele OluÅŸtur</button>
                </form>
            </div>
        </div>

        <!-- Confirm Modal -->
        <div id="confirm-overlay" class="overlay hidden">
            <div class="modal confirm-modal">
                <div class="modal-icon warning"><i class="fas fa-exclamation-triangle"></i></div>
                <h3 id="confirm-title">Onay</h3>
                <p id="confirm-text">Bu iÅŸlemi yapmak istediÄŸine emin misin?</p>
                <div class="modal-actions">
                    <button id="confirm-cancel-btn" class="secondary-btn">Ä°ptal</button>
                    <button id="confirm-yes-btn" class="danger-btn">Evet, Sil</button>
                </div>
            </div>
        </div>

        <!-- Expiry Modal -->
        <div id="expiry-overlay" class="overlay hidden">
            <div class="modal">
                <div class="modal-icon"><i class="fas fa-hourglass-half"></i></div>
                <h3 data-i18n="expiryTitle">Mesaj SÃ¼resi</h3>
                <p data-i18n="expiryDesc">Bu odadaki mesajlarÄ±n ne kadar sÃ¼re sonra silineceÄŸini seÃ§in.</p>
                <div class="expiry-options">
                    <button class="expiry-option" data-value="1">1 Saat</button>
                    <button class="expiry-option" data-value="6">6 Saat</button>
                    <button class="expiry-option" data-value="12">12 Saat</button>
                    <button class="expiry-option active" data-value="24">24 Saat</button>
                    <button class="expiry-option" data-value="168">7 GÃ¼n</button>
                </div>
                <button id="expiry-close-btn" class="secondary-btn" style="margin-top: 1rem;">Kapat</button>
            </div>
        </div>

        <!-- Header -->
        <header class="chat-header">
            <a href="/" class="logo-link">
                <div class="logo">
                    <i class="fas fa-satellite"></i>
                    <span>Talk2</span>
                </div>
            </a>
            <div class="room-info">
                <span class="room-badge"><i class="fas fa-hashtag"></i><span id="room-name-header"></span></span>
                <span class="user-count-badge"><i class="fas fa-users"></i><span id="user-count">0</span></span>
            </div>
            <div class="header-controls">
                <button id="share-link-btn" class="icon-btn" title="Linki PaylaÅŸ">
                    <i class="fas fa-share-alt"></i>
                </button>
                <button id="sound-toggle-btn" class="icon-btn" title="Bildirim Sesi">
                    <i class="fas fa-volume-up"></i>
                </button>
                <select id="lang-select" class="lang-select">
                    <option value="en">ğŸ‡ºğŸ‡¸ EN</option>
                    <option value="tr">ğŸ‡¹ğŸ‡· TR</option>
                    <option value="de">ğŸ‡©ğŸ‡ª DE</option>
                    <option value="ru">ğŸ‡·ğŸ‡º RU</option>
                    <option value="ph">ğŸ‡µğŸ‡­ PH</option>
                </select>
                <button id="expiry-btn" class="icon-btn" title="Mesaj SÃ¼resi">
                    <i class="fas fa-history"></i>
                </button>
                <button id="logout-btn" class="icon-btn" title="Ã‡Ä±kÄ±ÅŸ Yap">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
                <button id="toggle-sidebar" class="toggle-sidebar-btn" title="KullanÄ±cÄ±larÄ± GÃ¶ster">
                    <i class="fas fa-users"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="chat-wrapper">
            <!-- Chat Area -->
            <div class="chat-main">
                <!-- System Banner -->
                <div class="system-banner">
                    <i class="fas fa-meteor"></i> <span data-i18n="systemBanner">Bu odadaki veriler her 24 saatte bir silinir.</span>
                </div>

                <!-- Chat Container -->
                <main class="chat-container">
                    <div id="messages" class="messages-list"></div>
                    <div id="typing-indicator" class="typing-indicator hidden"></div>
                </main>

                <!-- Input Area -->
                <footer class="input-area">
                    <!-- Reply Preview -->
                    <div id="reply-preview" class="reply-preview hidden">
                        <div class="reply-info">
                            <i class="fas fa-reply"></i>
                            <span id="reply-to-name"></span>: <span id="reply-to-text"></span>
                        </div>
                        <button type="button" id="cancel-reply" class="cancel-reply-btn">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <form id="chat-form">
                        <button type="button" id="emoji-btn" title="Emoji"><i class="fas fa-smile"></i></button>
                        <button type="button" id="upload-btn" title="Resim YÃ¼kle"><i class="fas fa-image"></i></button>
                        <input type="file" id="image-input" accept="image/*" hidden>
                        <input type="text" id="message-input" placeholder="Bir mesaj yazÄ±n..." autocomplete="off" data-i18n-placeholder="placeholderMessage">
                        <button type="submit" id="send-btn"><i class="fas fa-paper-plane"></i></button>
                    </form>
                </footer>
            </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden"></div>

            <!-- Users Sidebar -->
            <aside id="users-sidebar" class="users-sidebar">
                <div class="sidebar-header">
                    <h3><i class="fas fa-users"></i> <span data-i18n="sidebarTitle">Ã‡evrimiÃ§i</span></h3>
                    <span id="sidebar-user-count" class="sidebar-count">0</span>
                </div>
                
                <!-- Clear Button -->
                <div class="sidebar-actions">
                    <button id="clear-msgs-btn" class="danger-btn"><i class="fas fa-trash-alt"></i> <span data-i18n="btnClearMyMsgs">MesajlarÄ±mÄ± Temizle</span></button>
                </div>

                <ul id="users-list" class="users-list"></ul>
                
                <div class="sidebar-footer">
                     <small>Dev: <a href="https://github.com/zveloxy" target="_blank" style="color:var(--text-secondary)">Veloxy</a></small>
                </div>
            </aside>
        </div>

        <!-- Emoji Picker -->
        <div id="emoji-picker" class="emoji-picker hidden">
            <div class="emoji-grid">
                <span>ğŸ˜€</span><span>ğŸ˜‚</span><span>ğŸ˜</span><span>ğŸ¤”</span><span>ğŸ˜</span>
                <span>ğŸ‘</span><span>ğŸ‘</span><span>â¤ï¸</span><span>ğŸ”¥</span><span>ğŸ’¯</span>
                <span>ğŸ‰</span><span>ğŸš€</span><span>âœ¨</span><span>ğŸ’€</span><span>ğŸ‘€</span>
                <span>ğŸ¤£</span><span>ğŸ˜</span><span>ğŸ¥²</span><span>ğŸ˜ˆ</span><span>ğŸ¤¯</span>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/client.js"></script>
</body>
</html>
